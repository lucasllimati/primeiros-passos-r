---
title: "Apresentação do R, RStudio e RMarkdown"
#subtitle: "Seção 01 - Apresentação do R, RStudio e RMarkdown"
author: "Vítor Wilher"
output: 
  beamer_presentation:
    #theme: "Boadilla"
    slide_level: 2
    fig_width: 8
    fig_height: 4
    fig_caption: true
    citation_package: 'natbib'
    includes:
      in_header: beamer.txt
      before_body: toc.txt
bibliography: 'references.bib'
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
def.chunk.hook  <- knitr::knit_hooks$get("chunk")
knitr::knit_hooks$set(chunk = function(x, options) {
  x <- def.chunk.hook(x, options)
  ifelse(options$size != "normalsize", paste0("\\", options$size,"\n\n", x, "\n\n \\normalsize"), x)
})

```



# Introdução
## Introdução

Eu comecei a utilizar o \(\mathbf{R}\) há alguns anos, influenciado por amigos. Minha introdução ao mundo dos programas estatísticos foi através do \href{http://www.eviews.com/home.html}{Eviews}, ainda nos tempos da graduação em economia, como provavelmente muitos dos matriculados nesse curso. Ainda que seja possível \emph{programar} no Eviews e em outros pacotes estatísticos fechados (que precisam de licença), as vantagens do \(\mathbf{R}\) são inúmeras, como comentarei mais à frente. Por ora, talvez seja necessário tecer algumas palavras sobre por que afinal é preciso aprender uma linguagem de programação. 

## Introdução

Eu poderia falar que o mundo está mudando, que cada vez mais empregos e empresas têm exigido conhecimentos de programação. E isso de fato é verdade, o que por si só gera uma necessidade de saber programação. Mas, aqui entre nós, acho que é meio chato aprender algo por necessidade, não é mesmo? 

\bigskip

Minha motivação para aprender a programar foi de fato outra. Eu estava um pouco cansado de \emph{apertar botões} e fazer tarefas repetitivas em pacotes estatísticos como o `Eviews` e o `Stata`, então parecia natural aprender uma forma de \emph{automatizar} as coisas. Essa, afinal, era uma baita motivação para mim e talvez também seja para você. Mas por que o \(\mathbf{R}\)?

## Introdução

Essa é de fato uma boa pergunta. Por que não aprender a programar no próprio `Eviews`? E a resposta é bastante simples. Você já tentou encontrar alguma coisa de programação em `Eviews` na internet? E sobre \(\mathbf{R}\)? Pois é. Entre as inúmeras vantagens do \(\mathbf{R}\), posso destacar:

\bigskip

\begin{itemize}

  \item A existência de uma comunidade grande e bastante entusiasmada, que compartilha conhecimento todo o tempo;
  
  \item o \(\mathbf{R}\) é gratuito, \emph{open source}, de modo que você não precisa comprar licenças de software para instalá-lo;
  
  \item Tem inúmeras bibliotecas (pacotes) em estatística, \emph{machine learning}, visualização, importação e tratamento de dados;
  
  \item Possui uma linguagem estabelecida para \emph{data analysis};
  
  \item Ferramentas poderosas para comunicação dos resultados da sua pesquisa, seja em forma de um website ou em pdf.

\end{itemize}

## Introdução

Ao aprender \(\mathbf{R}\), você conseguirá integrar as etapas de coleta, tratamento, análise e apresentação de dados em um único ambiente. Você vai esquecer ter de abrir o excel, algum pacote estatístico, depois o power point ou o word, depois um compilador de pdf para gerar seu relatório. Todas essas etapas serão feitas em um único ambiente. E essa talvez seja a grande motivação para você entrar de cabeça nesse mundo.^[Para maiores detalhes sobre esse ponto, ver @r4ds.]

## Introdução

Certamente não será simples, tenho de lhe dizer. Haverá muitos momentos em que você pensará em desistir. Um erro inesperado em algum \emph{script} poderá lhe tirar horas do seu tempo. No início, mais especificamente, qualquer pequeno problema pode parecer uma barreira intransponível. Nesses momentos, minha dica é \emph{não se demorar muito nessas dificuldades}. Vá para outro problema ou mesmo descanse. Faça outras coisas. Depois volte mais tranquilo, procure nos canais de ajuda que colocaremos aqui e as coisas irão se acertar. Acredite: passado esse tempo inicial, com persistência, você certamente se beneficiará muito em ter aprendido uma linguagem de programação como o \(\mathbf{R}\). 

## Introdução

Nosso objetivo na \href{https://analisemacro.com.br/}{Análise Macro}, com nossos \textcolor{red}{Cursos Aplicados de R} é lhe proporcionar uma experência inovadora. Todos os nossos cursos apresentam sólida teoria, mas sempre recheada de exercícios e exemplos práticos. Nosso objetivo é trazer para o Brasil algo que já é bastante corriqueiro no resto do mundo: \emph{você deve aprender fazendo}. Isso vai tornar o aprendizado mais interessante, mais divertido até. 

\bigskip

Isso dito, vamos começar então? Nessa primeira seção, você verá alguns procedimentos básicos, sobre programas e um \emph{overview} do \(\mathbf{R}\). A partir da seção 02 começa o seu curso propriamente dito. Seja bem vindo a esse mundo e espero que não sai mais dele!

# Instalando os programas 
## Instalando os programas

Antes de tudo, é preciso que você tenha os programas que utilizaremos ao longo das aulas instalados em seu computador. Serão três programas: \(\mathbf{R}\), \(\mathbf{RStudio}\) e \(\mathbf{MikTex}\). Não se preocupe, posto que são todos programas gratuitos e com \emph{download} seguro. Desse modo, para que não tenhamos problemas, siga a sequência abaixo:

\bigskip

\begin{enumerate}

  \item Baixe o \(\mathbf{R}\) em \href{http://cran-r.c3sl.ufpr.br/}{http://cran-r.c3sl.ufpr.br/};
  \item Baixe o \(\mathbf{RStudio}\) em \href{https://www.rstudio.com/products/rstudio/download/}{https://www.rstudio.com/products/rstudio/download/};
  \item Baixe o \(\mathbf{MikTex}\) em \href{http://miktex.org/download}{http://miktex.org/download}.

\end{enumerate}

## Instalando os programas

Para que você não tenha problemas no futuro, instale a versão do \textbf{MikTex} correspondente à versão do seu Windows. Isto é, se o seu Windows for 64 bits, instale a versão 64 bits do \textbf{MikTex}, se for 32 bits, instale a versão 32 bits do \textbf{MikTex}. 

# Trabalhando com o R a partir do RStudio
## Trabalhando com o R a partir do RStudio

Ao longo desse curso, nós não trabalharemos diretamente no \(\mathbf{R}\). Ao invés disso, usaremos o \(\mathbf{RStudio}\), uma interface mais amigável, que nos permite emular todos os códigos do \(\mathbf{R}\), visualizar gráficos, ver o histórico de nossas operações, importar dados, criar scripts, etc. Com o \(\mathbf{RStudio}\), poderemos otimizar o nosso curso, de maneira que o aluno terá mais facilidade para interagir com a linguagem. 

## Trabalhando com o R a partir do RStudio

\begin{figure}[ht!]
\centering
\includegraphics[width=110mm]{figura01.png}
\caption{Ambiente do RStudio. \label{figura01}}
\end{figure}

## Trabalhando com o R a partir do RStudio

A figura acima resume as quatro principais partes de uma tela do \(\mathbf{RStudio}\). Na parte superior esquerda é onde ficará o nosso \emph{editor de scripts}. Um \emph{script} é uma sequência de comandos com um determinado objetivo. Por exemplo, você pode estar interessado em \emph{construir um modelo univariado para fins de previsão do índice BOVESPA}. Para isso, terá de primeiro importar os dados do Ibovespa, bem como fazer uma análise descritiva inicial dos dados. Depois, com base nessa análise inicial, você terá de decidir entre alguns modelos univariados distintos. De posse da sua decisão, você enfim construirá um modelo de previsão para o índice BOVESPA. Essa sequência de \emph{linhas de comando} pode ficar armazenada em um \emph{script}, com extensão .R, podendo ser acessada posteriormente por você mesmo ou compartilhada com outros colegas de trabalho. Para abrir um novo \emph{script}, vá em \emph{File}, \emph{New File} e clique em \emph{R Script}.

## Trabalhando com o R a partir do RStudio

Na parte inferior esquerda, está o \emph{console do R}, onde você poderá executar comandos rápidos, que não queira registrar no seu script, bem como será mostrados os \emph{outputs} dos comandos que você executou no seu script. 

\bigskip

Já na parte superior direita, está o \emph{Environment}, onde ficam mostrados os objetos que você cria ao longo da sua seção no RStudio. Por fim, na parte inferior direita, ficarão os gráficos que você solicitar, bem como pacotes que você instalou, alguma ajuda sobre as funções e os arquivos disponíveis no seu diretório de trabalho. 

# Definindo seu diretório de trabalho
## Definindo seu diretório de trabalho

Agora que você já instalou os programas e já conhece um pouco do ambiente do \(\mathbf{RStudio}\), podemos começar a brincar um pouco. Para isso, antes de mais nada é preciso definir o seu \emph{diretório de trabalho} ou a pasta onde ficará salvo o seu \emph{script}. Uma vez definido, você poderá importar arquivos, colocar figuras no seu documento \LaTeX, etc. Logo, dois comandos são importantes para isso. O primeiro é o \textbf{getwd}, para você ver o seu atual \emph{working directory}. O segundo é o \textbf{setwd}, para você \emph{setar} o seu diretório de trabalho\footnote{Como você verá ao longo do nosso curso, as funções dentro do \(\mathbf{R}\) são todas em inglês e bastante intuitivas, como \emph{get something} ou \emph{set something}.}

## Definindo seu diretório de trabalho

```{r code1, echo=T, eval=T, results='markup', warning=FALSE, message=FALSE, size='tiny'}

getwd()

```

```{r code2, echo=T, eval=F, results='hide', warning=FALSE, message=FALSE, size='tiny'}


setwd('C:/Users/Vítor Wilher/Dropbox/VW Economista/Análise Macro/01 - Cursos/Introdução ao R para Análise de Dados/Seção 01 - Apresentação')

```

Uma vez \emph{setado} o seu diretório de trabalho, você poderá *importar* dados contidos naquela pasta. Assim, é um ponto importante realizar isso antes de qualquer coisa. Caso já tenha um \emph{script} de R, por suposto, uma vez abrindo-o, o RStudio setará automaticamente o diretório onde o mesmo esteja. 

# Manipulando objetos
## Manipulando objetos

Na maior parte do seu tempo dentro do \(\mathbf{RStudio}\) você estará *manipulando objetos*. Seja lidando com objetos criados por terceiros, seja criando seus próprios objetos. As principais estruturas de dados dentro do \(\mathbf{R}\) envolvem \emph{vetores}, \emph{matrizes}, \emph{listas} e \emph{data frames}. Abaixo colocamos um exemplo da estrutura mais simples do \(\mathbf{R}\): um vetor que exprime a sequência de 1 a 10.

```{r code3, echo=T, results='markup', warning=FALSE, message=FALSE, size='footnotesize'}

vetor <- c(1:10)
vetor

```

## Manipulando objetos

Ao longo do nosso curso, aprenderemos na prática a lidar com essas diferentes estruturas de dados. Em particular, aprenderemos a fazer o \emph{subsetting} dessas estruturas, de modo a capturar subelementos das mesmas.  

# Milhares de pacotes a sua disposição
## Milhares de pacotes a sua disposição

O \(\mathbf{R}\) é uma linguagem aberta, onde qualquer pessoa em qualquer parte do mundo pode dar a sua contribuição. Em geral, elas fazem isso através de \emph{pacotes}, que são coleções de funções que fazem algum coisa dentro do \(\mathbf{R}\). Veremos muitos desses pacotes ao longo do nosso curso. A instalação de pacotes é feita primariamente pelo CRAN, através da seguinte função:

```{r code4, eval=F, echo=T, results='hide', warning=FALSE, message=FALSE, size='footnotesize'}

install.packages('fBasics')

```

## Milhares de pacotes a sua disposição

O pacote é instalado corretamente quando aparece a mensagem \emph{package 'fBasics' successfully unpacked and MD5 sums checked} no seu console. Ademais, no processo de instalação de um pacote, pode ser necessário instalar outros pacotes, chamados de \emph{dependentes}, porque uma ou mais funções do pacote que você quer instalar fazem uso de funções de outros pacotes. Assim, \textbf{para que a instalação seja efetuada com sucesso, é preciso que todos os pacotes dependentes sejam instalados corretamente.} Por isso, procure verificar as mensagens no console de forma a verificar se o pacote foi instalado corretamente, como mostrado na figura 2. 

## Milhares de pacotes a sua disposição

\begin{figure}[ht!]
\centering
\includegraphics[width=110mm]{figura02.png}
\caption{Instalando pacotes. \label{figura01}}
\end{figure}

## Milhares de pacotes a sua disposição

Uma vez instalado, os seus pacotes ficam armazenados na pasta \emph{library} da versão correspondente do seu R.\footnote{Toda vez que você instalar uma nova versão do R, uma dica é pegar os pacotes da sua pasta library e copiar os mesmos para a pasta library da nova versão, de modo a não ter que instalar tudo novamente.} Você pode ver a lista de pacotes naturamente, diretamente no RStudio, através da aba \emph{Packages} no canto inferior direito.\footnote{Uma lista dos pacotes disponíveis pode ser encontrada \href{https://cran.r-project.org/web/packages/available_packages_by_name.html}{aqui}.}

## Milhares de pacotes a sua disposição

Uma outra forma muito comum de instalar pacotes é através do \textbf{GitHub}, uma plataforma bem bacana utilizada por desenvolvedores para compartilhar códigos. Ali ficam armazenados pacotes \emph{em desenvolvimento}, que ainda não estão disponíveis no CRAN. Para instalar um pacote via GitHub, você deve ter instalado primeiro o pacote \emph{devtools}. O código abaixo exemplifica com a instalação do pacote brasileiro BETS.\footnote{Para saber mais sobre o BETS, vá em \href{https://github.com/pedrocostaferreira/BETS}{https://github.com/pedrocostaferreira/BETS}.} 

## Milhares de pacotes a sua disposição

```{r code5, eval=F, echo=T, results='hide', warning=FALSE, message=FALSE, size='footnotesize'}

install.packages('devtools')
require(devtools)
install_github("pedrocostaferreira/BETS")

```

No código acima, nos instalamos o pacote \emph{devtools}, depois \textbf{carregamos} o mesmo com a função \texttt{require} - também pode ser utilizado a função \texttt{library} - e então utilizamos a função \texttt{install\_github} para instalar um pacote armazenado no GitHub. 

## Milhares de pacotes a sua disposição

Às vezes pode ser necessário instalar uma versão antiga de um pacote, seja porque a versão atual tem algum \emph{bug} - acontece! - seja porque ela é incompatível com o pacote que queremos usar. Para instalar versões antigas, você tem duas opções. Uma é subir o arquivo fonte zipado do pacote diretamente no RStudio, na opção \emph{Tools} e \emph{Install Packages}. Outra é utilizar a função \texttt{install\_version} do pacote \emph{devtools}, como abaixo.

```{r code6, eval=F, echo=T, results='hide', warning=FALSE, message=FALSE, size='footnotesize'}

install_version("DBI", 
                version = "0.5", 
                repos = "http://cran.us.r-project.org")

```

## Milhares de pacotes a sua disposição

É muito comum os alunos receberem o erro de \emph{caminho inválido} para a biblioteca de pacotes. Nesse caso, você pode especificar o caminho da biblioteca com o código abaixo.

```{r code7, eval=F, echo=T, results='hide', warning=FALSE, message=FALSE, size='footnotesize'}

library(withr) 
with_libpaths(new = "C:/Program Files/R/R-3.4.1/library",
              install_github("StatsWithR/statsr"))

```

## Milhares de pacotes a sua disposição

Por fim, vale ressaltar que todo pacote disponível no CRAN tem uma página com suas informações. Veja o exemplo do \emph{devtools} \href{https://cran.r-project.org/web/packages/devtools/index.html}{aqui}. Lá você pode ver um resumo do pacote, um pdf com as principais funções, versões antigas, etc. 

# Obtendo ajuda
## Obtendo ajuda

Uma parte importante de aprender uma nova linguagem é saber conseguir resolver os pepinos que irão surgir ao longo do caminho. E, acredite: eles serão muitos! Mas não se desespere. Como há uma comunidade incrível trabalhando com \(\mathbf{R}\), existem inúmeros sites, blogs, tutoriais, apostilas, etc, que podem lhe ajudar. No próprio ambiente do \(\mathbf{RStudio}\), você pode invocar ajuda com os comandos abaixo.\footnote{Observe que utilizamos o 'jogo da velha' \# para colocar um comentário após a função. Isso é extremamente útil para que você lembre seus passos em um script no \(\mathbf{R}\), bem como no momento que você compartilhar seu script com outra pessoa.}

```{r code8, echo=TRUE, eval=F, results='hide', message=FALSE, error=FALSE, warning=FALSE, size='footnotesize'}

help.start() # Você terá acesso à página de ajuda do R.
help("read.csv") # Uma ajuda sobre a função 'read.csv'
?read.csv # A mesma coisa do comando acima.

```

## Obtendo ajuda

Caso continue com dúvidas, entretanto, nada melhor do que o bom e velho Google. Recomendo que você jogue sempre sua dúvida lá, antes de qualquer coisa. Uma dica: jogue ela em inglês e verá logo na primeira página um monte de gente com o mesmo problema que você! Em particular, um fórum bastante conhecido é o \href{https://stackoverflow.com/questions/tagged/r}{Stackoverflow}, onde pessoas mais experientes procuram ajudar os mais novos. Caso sua dúvida não seja resolvível via google, considere jogá-la nesse fórum. A versão em português do fórum está disponível em \href{https://pt.stackoverflow.com/questions/tagged/r}{https://pt.stackoverflow.com/questions/tagged/r}. 

## Obtendo ajuda

Outra coisa que você deve fazer a partir de agora é acompanhar blogs que falam de \(\mathbf{R}\). Modéstia ao largo, não se esqueça de acompanhar o meu próprio site \href{http://www.analisemacro.com.br/blog}{www.analisemacro.com.br/blog}. Lá faço alguns exercícios interessantes de como usar o \(\mathbf{R}\) para resolver nossos problemas diários de análise de dados. No exterior, há uma infinidade de blogs reunidos no famoso \href{http://www.r-bloggers.com/}{R-bloggers}. 

# Sobre o Suporte do Curso
## Sobre o Suporte do Curso

Os alunos do \textcolor{red}{Curso de Introdução ao R para Análise de Dados} contarão com suporte para dúvidas. Para ter acesso ao suporte, você deve clicar no botão azul no canto inferior direito da plataforma, conforme a figura a seguir. Demais dúvidas também devem ser enviadas por esse canal. 

## Sobre o Suporte do Curso

\begin{figure}[ht!]
\centering
\includegraphics[width=110mm]{suporte.png}
\caption{Suporte de Dúvidas da Análise Macro. \label{suporte}}
\end{figure}

# O RMarkdown
## O RMarkdown

Uma grande diferença desse novo Curso de Introdução ao R para a versão anterior da Análise Macro é que estamos abandonando o \LaTeX. Nas mais de 30 turmas que ofertei do meu curso de Introdução ao R, as maiores dúvidas iniciais dos alunos não eram sobre o R, mas sobre o \LaTeX. Assim, perdíamos - o aluno e eu - muito tempo aprendendo alguma sintaxe de \LaTeX, enquanto o R ficava deixado de lado nesses primeiros momentos.

\bigskip

Isso dito e dada a estabilidade alcançada pelo `RMarkdown`, passarei a utilizá-lo de forma intensiva em nosso Curso.

## O RMarkdown

Isso significa basicamente que todos os `scripts` do curso foram escritos em arquivos com extensão `.Rmd`. Evitei ao máximo escrever `scripts` `.R` nesse curso, de modo a lhe convencer que faz todo o sentido produzir arquivos `.Rmd`, seja para o seu próprio uso, seja para compartilhamento com outros usuários. 

## O RMarkdown

Isso dito, o primeiro arquivo `.Rmd` que você terá contato aqui no curso será o arquivo `respostas.Rmd`. Ele é um arquivo pré-montado para que você possa responder os eventuais exercícios que eu proponha ao longo do curso. 

## O RMarkdown

Outro ponto importante, é que todos os arquivos `.Rmd` foram produzidos com o *encoding* **UTF-8**. Assim, caso tenha algum problema com esses arquivos, certifique-se de estar usando esse *encoding*. 

## O RMarkdown

A seguir, mostro na videoaula um pouco mais sobre o `RMarkdown`...

